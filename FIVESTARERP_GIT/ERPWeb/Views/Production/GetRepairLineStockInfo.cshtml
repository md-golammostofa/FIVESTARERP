@{
    ViewBag.Title = "Repair Section Process";
    //var privilege = (ERPBO.Common.UserPrivilege)ViewBag.UserPrivilege;
}

<div class="row">
    <div class="col-md-12 text-sm">
        <div class="card card-primary card-outline card-tabs">
            <div class="card-header p-0 pt-1 border-bottom-0">
                <ul class="nav nav-tabs text-sm" id="custom-tabs-two-tab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="custom-tabs-two-receiveQCStock-tab" data-toggle="pill" href="#custom-tabs-two-receiveQCStock" role="tab" aria-controls="custom-tabs-two-receiveQCStock" aria-selected="true">Receive Handset</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="custom-tabs-two-ItemStockInfo-tab" data-toggle="pill" href="#custom-tabs-two-ItemStockInfo" role="tab" aria-controls="custom-tabs-two-ItemStockInfo" aria-selected="true">Handset Stock</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" id="custom-tabs-two-transferList-tab" data-toggle="pill" href="#custom-tabs-two-transferList" role="tab" aria-controls="custom-tabs-two-transferList" aria-selected="true">Transfer To QC</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="custom-tabs-two-stockInfo-tab" data-toggle="pill" href="#custom-tabs-two-stockInfo" role="tab" aria-controls="custom-tabs-two-stockInfo" aria-selected="true">Parts Stock</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="custom-tabs-two-reqList-tab" data-toggle="pill" href="#custom-tabs-two-reqList" role="tab" aria-controls="custom-tabs-two-reqList" aria-selected="true">Requisition List</a>
                    </li>
                    <li class="nav-item hide">
                        <a class="nav-link" id="custom-tabs-two-addReq-tab" data-toggle="pill" href="#custom-tabs-two-addReq" role="tab" aria-controls="custom-tabs-two-addReq" aria-selected="true">Add Requisition</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="custom-tabs-two-faultyStock-tab" data-toggle="pill" href="#custom-tabs-two-faultyStock" role="tab" aria-controls="custom-tabs-two-faultyStock" aria-selected="true">Faulty Stock</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="custom-tabs-two-faultyStockTransfer-tab" data-toggle="pill" href="#custom-tabs-two-faultyStockTransfer" role="tab" aria-controls="custom-tabs-two-faultyStockTransfer" aria-selected="true">Faulty Stock Return List</a>
                    </li>
                    <li class="nav-item hide">
                        <a class="nav-link" id="custom-tabs-two-receiveStock-tab" data-toggle="pill" href="#custom-tabs-two-receiveStock" role="tab" aria-controls="custom-tabs-two-receiveStock" aria-selected="true">Receive Parts From Floor</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="custom-tabs-two-returnStockList-tab" data-toggle="pill" href="#custom-tabs-two-returnStockList" role="tab" aria-controls="custom-tabs-two-returnStockList" aria-selected="false">Stock Return List</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="custom-tabs-two-qrCodeList-tab" data-toggle="pill" href="#custom-tabs-two-qrCodeList" role="tab" aria-controls="custom-tabs-two-qrCodeList" aria-selected="false">QRCode List</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="custom-tabs-two-qrCodeReceiveFromMiniStockList-tab" data-toggle="pill" href="#custom-tabs-two-qrCodeReceiveFromMiniStockList" role="tab" aria-controls="custom-tabs-two-qrCodeReceiveFromMiniStockList" aria-selected="false">Receive Stock(M S)</a>
                    </li>
                </ul>
            </div>
            <div class="card-body">
                @Html.AntiForgeryToken()
                <div class="tab-content" id="custom-tabs-two-tabContent">
                    <div class="tab-pane fade show active" id="custom-tabs-two-receiveQCStock" role="tabpanel" aria-labelledby="custom-tabs-two-receiveQCStock-tab">
                        <div class="row" style="margin-top:-15px">
                            <div class="col-md-12">
                                <div class="card card-gray-dark">
                                    <div class="card-header">
                                        <div class="row">
                                            <div class="col-md-3">
                                            </div>
                                            <div class="col-md-6">
                                                <h5 class="text-center text-bold">
                                                    Receive Items From QC
                                                </h5>
                                            </div>
                                            <div class="col-md-3">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card card-navy">
                                    <div class="card-header">
                                        <h6 class="card-title">Search By</h6>
                                    </div>
                                    <div class="card-body text-sm">
                                        <div class="row" style="margin-top:-15px">
                                            <div class="col-md-3">
                                                <label for="ddlFloorReceiveQCItem" class="control-label font-weight-bold">Floor</label>
                                                @Html.DropDownList("ddlFloorReceiveQCItem", (IEnumerable<SelectListItem>)ViewBag.ddlLineNumber, "--Select Floor--", new { @class = "form-control form-control-sm ctrl-change" })
                                            </div>
                                            <div class="col-md-3">
                                                <label for="ddlQCLineReceiveQCItem" class="control-label font-weight-bold">QC</label>
                                                <select id="ddlQCLineReceiveQCItem" class="form-control form-control-sm">
                                                    <option value="0">--Select QC Line--</option>
                                                </select>
                                            </div>
                                            <div class="col-md-3">
                                                <label for="ddlRepairLineReceiveQCItem" class="control-label font-weight-bold">Repair</label>
                                                <select id="ddlRepairLineReceiveQCItem" class="form-control form-control-sm">
                                                    <option value="0">--Select Repair Line--</option>
                                                </select>
                                            </div>
                                            <div class="col-md-3">
                                                <label for="ddlModelNameReceiveQCItem" class="control-label font-weight-bold">Model</label>
                                                @Html.DropDownList("ddlModelNameReceiveQCItem", (IEnumerable<SelectListItem>)ViewBag.ddlModelName, "--Select Model--", new { @class = "form-control form-control-sm ctrl-change select2 select2-danger" })
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <label for="txtTSQCode" class="control-label font-weight-bold">Transfer Code</label>
                                                <input type="text" id="txtTSQCode" class="form-control form-control-sm" placeholder="Search By Transfer Code" />
                                            </div>
                                            <div class="col-md-3">
                                                <label for="ddlStateStatusReceiveQCItem" class="control-label font-weight-bold">StateStatus</label>
                                                @Html.DropDownList("ddlStateStatusReceiveQCItem", (IEnumerable<SelectListItem>)ViewBag.ddlStateStatus, "--Select Status--", new { @class = "form-control form-control-sm" })
                                            </div>
                                            <div class="col-md-3">
                                                <label class="control-label font-weight-bold">From Date</label>
                                                <div class="input-group input-group-sm ">
                                                    <input type="text" class="form-control form-control-sm date-datePicker ctrl-changed-receive" id="dptFromDateReceiveQCItem" />
                                                    <div class="input-group-prepend cursor-pointer remove-date-ReceiveQC dptFromDateReceiveQCItem" style="cursor:pointer">
                                                        <span class="input-group-text">&#10008;</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <label class="control-label font-weight-bold">To Date</label>
                                                <div class="input-group input-group-sm ">
                                                    <input type="text" class="form-control form-control-sm date-datePicker ctrl-changed-receive" id="dptToDateReceiveQCItem" />
                                                    <div class="input-group-prepend remove-date-ReceiveQC dptToDateReceiveQCItem" style="cursor:pointer">
                                                        <span class="input-group-text">&#10008;</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="col-md-12" id="dataContainer1">
                                            @*@{Html.RenderAction("GetReceiveStockForRepairFromQC", new { @flag = "View" });}*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade show" id="custom-tabs-two-ItemStockInfo" role="tabpanel" aria-labelledby="custom-tabs-two-ItemStockInfo-tab">
                        <div class="row" style="margin-top:-15px">
                            <div class="col-md-12">
                                <div class="card card-gray-dark">
                                    <div class="card-header">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <a href="#" class="float-left btn btn-sm btn-outline-primary" title="Details View">
                                                    <i class="fas fa-eye"></i> Go To Details View
                                                </a>
                                            </div>
                                            <div class="col-md-6">
                                                <h5 class="text-center text-bold">
                                                    Repair Item Stock
                                                </h5>
                                            </div>
                                            <div class="col-md-3">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row text-sm">
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card card-navy">
                                    @Html.AntiForgeryToken()
                                    <div class="card-header">
                                        <h6 class="card-title">Search By</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="row" style="margin-top:-15px">
                                            <div class="col-md-2">
                                                <label for="ddlFloorItemStock" class="control-label font-weight-bold">Floor</label>
                                                @Html.DropDownList("ddlFloorItemStock", (IEnumerable<SelectListItem>)ViewBag.ddlLineNumber, "--Select Floor--", new { @class = "form-control form-control-sm ctrl-change" })
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlQCLineItemStock" class="control-label font-weight-bold">QC</label>
                                                <select id="ddlQCLineItemStock" class="form-control form-control-sm">
                                                    <option value="0">--Select QC--</option>
                                                </select>
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlRepairLineItemStock" class="control-label font-weight-bold">Repair</label>
                                                <select id="ddlRepairLineItemStock" class="form-control form-control-sm">
                                                    <option value="0">--Select Repair--</option>
                                                </select>
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlModelNameItemStock" class="control-label font-weight-bold">Model</label>
                                                @Html.DropDownList("ddlModelNameItemStock", (IEnumerable<SelectListItem>)ViewBag.ddlModelName, "--Select Model--", new { @class = "form-control form-control-sm ctrl-change select2 select2-danger" })
                                            </div>
                                            <div class="col-md-3">
                                                <label for="ddlItemsItemStock" class="control-label font-weight-bold">Item/Item-Color</label>
                                                @Html.DropDownList("ddlItemsItemStock", (IEnumerable<SelectListItem>)ViewBag.ddlMobileItems, "--Select Item--", new { @class = "form-control form-control-sm ctrl-change select2 select2-danger" })
                                            </div>
                                            <div class="col-md-1">
                                                <label class="control-label font-weight-bold" for="txtLessOrEqItemStock">Qty(L/E)</label>
                                                <input type="number" id="txtLessOrEqItemStock" class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        @*<div class="row">


                            </div>*@
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="col-md-12" id="dataContainer2">
                                            @*@{Html.RenderAction("GetRepairItemStockList", new { @flag = "View" });}*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade show" id="custom-tabs-two-transferList" role="tabpanel" aria-labelledby="custom-tabs-two-transferList-tab">
                        <div class="row">
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card card-navy">
                                    <div class="card-header">
                                        <h6 class="card-title">Search By</h6>
                                    </div>
                                    <div class="card-body text-sm">
                                        <div class="row" style="margin-top:-15px">
                                            <div class="col-md-2">
                                                <label for="ddlFloorTransferQCItem" class="control-label font-weight-bold">Floor</label>
                                                @Html.DropDownList("ddlFloorTransferQCItem", (IEnumerable<SelectListItem>)ViewBag.ddlLineNumber, "--Select Floor--", new { @class = "form-control form-control-sm ctrl-change" })
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlQCLineTransferQCItem" class="control-label font-weight-bold">QC</label>
                                                <select id="ddlQCLineTransferQCItem" class="form-control form-control-sm">
                                                    <option value="0">--Select QC--</option>
                                                </select>
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlRepairLineTransferQCItem" class="control-label font-weight-bold">Repair</label>
                                                <select id="ddlRepairLineTransferQCItem" class="form-control form-control-sm">
                                                    <option value="0">--Select Repair--</option>
                                                </select>
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlModelNameTransferQCItem" class="control-label font-weight-bold">Model</label>
                                                @Html.DropDownList("ddlModelNameTransferQCItem", (IEnumerable<SelectListItem>)ViewBag.ddlModelName, "--Select Model--", new { @class = "form-control form-control-sm ctrl-change select2 select2-danger" })
                                            </div>
                                            <div class="col-md-2">
                                                <label for="txtTRQCode" class="control-label font-weight-bold">Transfer Code</label>
                                                <input type="text" id="txtTRQCode" class="form-control form-control-sm" placeholder="Search By Code" />
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlStateStatusTransferQCItem" class="control-label font-weight-bold">StateStatus</label>
                                                @Html.DropDownList("ddlStateStatusTransferQCItem", (IEnumerable<SelectListItem>)ViewBag.ddlStateStatus, "--Select Status--", new { @class = "form-control form-control-sm" })
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-2">
                                                <label class="control-label font-weight-bold">From Date</label>
                                                <div class="input-group input-group-sm ">
                                                    <input type="text" class="form-control form-control-sm date-datePicker ctrl-changed-receive" id="dptFromDateTransferQCItem" />
                                                    <div class="input-group-prepend cursor-pointer remove-date-TransferQC dptFromDateTransferQCItem" style="cursor:pointer">
                                                        <span class="input-group-text">&#10008;</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <label class="control-label font-weight-bold">To Date</label>
                                                <div class="input-group input-group-sm ">
                                                    <input type="text" class="form-control form-control-sm date-datePicker ctrl-changed-receive" id="dptToDateTransferQCItem" />
                                                    <div class="input-group-prepend remove-date-TransferQC dptToDateTransferQCItem" style="cursor:pointer">
                                                        <span class="input-group-text">&#10008;</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="col-md-12" id="dataContainer3">
                                            @*@{Html.RenderAction("GetRepairItemTransferInfoAndDetailByQRCode", new { @flag = "View" });}*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade show" id="custom-tabs-two-stockInfo" role="tabpanel" aria-labelledby="custom-tabs-two-stockInfo-tab">
                        <div class="row" style="margin-top:-15px">
                            <div class="col-md-12">
                                <div class="card card-gray-dark">
                                    <div class="card-header">
                                        <div class="row">
                                            <div class="col-md-3">
                                            </div>
                                            <div class="col-md-6">
                                                <h5 class="text-center text-bold">
                                                    Repair Spare Parts Stock
                                                </h5>
                                            </div>
                                            <div class="col-md-3">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card card-navy">
                                    <div class="card-header">
                                        <h6 class="card-title">Search By</h6>
                                    </div>
                                    <div class="card-body text-sm">
                                        <div class="row" style="margin-top:-15px">
                                            <div class="col-md-2">
                                                <label for="ddlProductionFloorStock" class="control-label font-weight-bold">Floor</label>
                                                @Html.DropDownList("ddlProductionFloorStock", (IEnumerable<SelectListItem>)ViewBag.ddlLineNumber, "--Select Floor--", new { @class = "form-control form-control-sm ctrl-change" })
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlRepairLineStock" class="control-label font-weight-bold">Repair Line</label>
                                                <select id="ddlRepairLineStock" class="form-control form-control-sm">
                                                    <option value="0">--Select Repair--</option>
                                                </select>
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlModelNameStockStock" class="control-label font-weight-bold">Model</label>
                                                @Html.DropDownList("ddlModelNameStock", (IEnumerable<SelectListItem>)ViewBag.ddlModelName, "--Select Model--", new { @class = "form-control form-control-sm ctrl-change select2 select2-danger" })
                                            </div>
                                            <div class="col-md-3">
                                                <label for="ddlItemsStock" class="control-label font-weight-bold">Item Name</label>
                                                @Html.DropDownList("ddlItemsStock", (IEnumerable<SelectListItem>)ViewBag.ddlItems, "--Select Item--", new { @class = "form-control form-control-sm ctrl-change select2 select2-danger" })
                                            </div>
                                            <div class="col-md-2">
                                                <label class="control-label font-weight-bold">Qty (Less/ Eq)</label>
                                                <input type="number" id="txtLessOrEq" class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="col-md-12 text-sm" id="dataContainer4">
                                            @*@{Html.RenderAction("GetRepairLineStockInfo", new { @flag = "View" });}*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade show " id="custom-tabs-two-reqList" role="tabpanel" aria-labelledby="custom-tabs-two-reqList-tab">
                        <div class="row text-sm" style="margin-top:-15px">
                            <div class="col-md-12">
                                <div class="card card-gray-dark">
                                    <div class="card-header">
                                        <div class="row">
                                            <div class="col-md-3">

                                            </div>
                                            <div class="col-md-6">
                                                <h5 class="text-center text-bold">
                                                    Repair Section Requisition Info List
                                                </h5>
                                            </div>
                                            <div class="col-md-3">
                                                <a href="@Url.Action("CreateRepairSectionRequisition","Production",new {@reqFor="Repair" })" class="btn btn-sm btn-outline-secondary btn-flat float-right" title="Add New Requisition" id="btnAddNew"><i class="fa fa-plus"></i> Requisition</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row text-sm">
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card card-navy">
                                    <div class="card-header">
                                        <h6 class="card-title">
                                            Search By
                                        </h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="row" style="margin-top:-15px">
                                            <div class="col-md-3">
                                                <label for="txtReqCode" class="control-label font-weight-bold">Requisition Code</label>
                                                <input type="text" name="search" id="txtReqCode" class="form-control form-control-sm" placeholder="Search By Requisition Code" />
                                            </div>
                                            <div class="col-md-3">
                                                <label for="ddlRepairLineReqList" class="control-label">Repair Line</label>
                                                @Html.DropDownList("ddlRepairLineReqList", (IEnumerable<SelectListItem>)ViewBag.ddlRepairLine, "--Select Repair Line--", new { @class = "form-control form-control-sm ctrl-changed" })
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlModelNameReqList" class="control-label font-weight-bold">Model</label>
                                                @Html.DropDownList("ddlModelNameReqList", (IEnumerable<SelectListItem>)ViewBag.ddlModelName, "--Select Model--", new { @class = "form-control form-control-sm select2 select2-danger ctrl-changed" })
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlWarehouseReqList" class="control-label font-weight-bold">Warehouse</label>
                                                @Html.DropDownList("ddlWarehouseReqList", (IEnumerable<SelectListItem>)ViewBag.ddlWarehouse, "--Select Warehouse--", new { @class = "form-control form-control-sm ctrl-changed" })
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlStateStatusReqList" class="control-label font-weight-bold">StateStatus</label>
                                                @Html.DropDownList("ddlStateStatusReqList", (IEnumerable<SelectListItem>)ViewBag.ddlStateStatus, "--Select Status--", new { @class = "form-control form-control-sm ctrl-changed" })
                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col-md-2">
                                                <label class="control-label font-weight-bold">From Date</label>
                                                <div class="input-group input-group-sm ">
                                                    <input type="text" class="form-control form-control-sm date-datePicker ctrl-changed" id="dptFromDateReqList" />
                                                    <div class="input-group-prepend cursor-pointer remove-date-reqList dptFromDateReqList" style="cursor:pointer">
                                                        <span class="input-group-text">&#10008;</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <label class="control-label font-weight-bold">To Date</label>
                                                <div class="input-group input-group-sm ">
                                                    <input type="text" class="form-control form-control-sm date-datePicker ctrl-changed" id="dptToDateReqList" />
                                                    <div class="input-group-prepend remove-date-reqList dptToDateReqList" style="cursor:pointer">
                                                        <span class="input-group-text">&#10008;</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-12" id="dataContainer5" style="min-height:50px">
                                                @*@{Html.RenderAction("GetRepairSectionRequisitionInfoList", new { @flag = "View", reqFor="Repair" });}*@
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade show " id="custom-tabs-two-addReq" role="tabpanel" aria-labelledby="custom-tabs-two-addReq-tab">
                        <div class="row" style="margin-top:-15px">
                            <div class="col-md-12">
                                <div class="card card-gray-dark">
                                    <div class="card-header">
                                        <div class="row">
                                            <div class="col-md-3">
                                                @*<a href="/Production/GetRepairSectionRequisitionInfoList" class="btn btn-sm btn-outline-primary" title="Back To List"><i class="fas fa-arrow-alt-circle-left"></i></a>*@
                                            </div>
                                            <div class="col-md-6 text-center">
                                                <h5><b>Repair Section Requisition</b></h5>
                                            </div>
                                            <div class="col-md-3">
                                                <button class="btn btn-outline-danger btn-sm float-right" id="btnReset" title="RESET UI"><i class="fas fa-sync-alt"></i></button>
                                            </div>
                                        </div>
                                    </div>
                                    <form id="frmReqDetails">
                                        @Html.AntiForgeryToken()
                                        <input type="hidden" id="hdfReqDetailsId" value="0" />
                                        <div class="card-body">
                                            <div class="row text-sm">
                                                <div class="col-md-2">
                                                    <label for="ddlRepairLineReq" class="control-label">Repair-Line</label>
                                                    @Html.DropDownList("ddlRepairLineReq", (IEnumerable<SelectListItem>)ViewBag.ddlRepairLine, "--Select Repair Line--", new { @class = "form-control form-control-sm" })
                                                    <span class="error hide req-line">Repair line is required</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <label for="ddlModelNameReq" class="control-label font-weight-bold">Model</label>
                                                    @Html.DropDownList("ddlModelNameReq", (IEnumerable<SelectListItem>)ViewBag.ddlModelName, "--Select Model--", new { @class = "form-control form-control-sm select2 select2-danger" })
                                                    <span class="error hide req-model">Model is required</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <label for="ddlWarehouseReq" class="control-label font-weight-bold">Warehouse</label>
                                                    @Html.DropDownList("ddlWarehouseReq", (IEnumerable<SelectListItem>)ViewBag.ddlWarehouse, "--Select Warehouse--", new { @class = "form-control form-control-sm" })
                                                    <span class="error hide req-warehouse">Warehouse Name is required</span>
                                                </div>
                                                <div class="col-md-3">
                                                    <label for="ddlItemReq" class="control-label font-weight-bold">Item Name</label>
                                                    <select id="ddlItemReq" class="form-control form-control-sm select2 select2-danger">
                                                        <option value="">--Select Item--</option>
                                                    </select>
                                                    <span class="error hide req-item">Item Name is required</span>
                                                    <span class="error hide duplicate-itemName">The Item is already added into the list!</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <label for="txtQuantityReq" class="control-label font-weight-bold">
                                                        Quantity <span id="unitName" class="font-weight-bold mt-2" style="color:darkblue"></span>
                                                    </label>
                                                    <input type="number" name="quantity" id="txtQuantityReq" class="form-control form-control-sm" />
                                                    <span class="error hide req-quantity">Quantity is required</span>
                                                </div>
                                                <div class="col-md-1">
                                                    <label for="" class="control-label font-weight-bold" style="visibility:hidden">Add</label>
                                                    <div class="clearfix">
                                                        <button type="submit" class="btn btn-sm btn-warning float-right" id="btnAddToList" title="Add To List"><i class="fas fa-plus"></i></button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-4 hide">
                                                    <label for="txtRemarksReq" class="control-label font-weight-bold">Remarks</label>
                                                    <textarea type="text" name="remarks" cols="5" rows="1" value="" id="txtRemarksReq" class="form-control form-control-sm"></textarea>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-md-12 mt-2">
                                                    <table class="table table-bordered table-sm table-striped table-responsive-lg text-sm" id="tblData">
                                                        <thead>
                                                            <tr class="badge-light">
                                                                <th colspan="9">
                                                                    <button class="btn btn-sm btn-success btn-sm float-lg-left" id="btnSubmit">SAVE <i class="fas fa-paper-plane"></i></button>
                                                                </th>
                                                            </tr>
                                                            <tr class="text-center btn-dark">
                                                                <th style="width:10%">#SL</th>
                                                                <th style="width:50%">Item Name</th>
                                                                <th style="width:10%">Quantity</th>
                                                                <th style="width:10%">Type Of Unit</th>
                                                                <th style="width:10%" class="hide">Remarks</th>
                                                                <th style="width:10%">Action</th>
                                                                <th class="hide itemTypeId"></th>
                                                                <th class="hide itemId"></th>
                                                                <th class="hide unitId"></th>
                                                                <th class="hide itemType"></th>
                                                                <th class="hide itemName"></th>
                                                                <th class="hide unitName"></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade show " id="custom-tabs-two-faultyStock" role="tabpanel" aria-labelledby="custom-tabs-two-faultyStock-tab">
                        <div class="row" style="margin-top:-15px">
                            <div class="col-md-12">
                                <div class="card card-gray-dark">
                                    <div class="card-header">
                                        <div class="row">
                                            <div class="col-md-3">

                                            </div>
                                            <div class="col-md-6">
                                                <h5 class="text-center text-bold">
                                                    Faulty Spare Parts Stock
                                                </h5>
                                            </div>
                                            <div class="col-md-3">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row text-sm">
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card card-navy">
                                    <div class="card-header">
                                        <h6 class="card-title">Search By</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="row" style="margin-top:-15px">
                                            <div class="col-md-2">
                                                <label for="ddlRepairLineFaultyStock" class="control-label font-weight-bold">Repair</label>
                                                @Html.DropDownList("ddlRepairLineFaultyStock", (IEnumerable<SelectListItem>)ViewBag.ddlRepairLine, "--Select Repair--", new { @class = "form-control form-control-sm" })
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlModelNameFaultyStock" class="control-label font-weight-bold">Model</label>
                                                @Html.DropDownList("ddlModelNameFaultyStock", (IEnumerable<SelectListItem>)ViewBag.ddlModelName, "--Select Model--", new { @class = "form-control form-control-sm select2 select2-danger" })
                                            </div>
                                            <div class="col-md-4">
                                                <label for="ddlItemsFaultyStock" class="control-label font-weight-bold">Items</label>
                                                @Html.DropDownList("ddlItemsFaultyStock", (IEnumerable<SelectListItem>)ViewBag.ddlItems, "--Select Item--", new { @class = "form-control form-control-sm select2 select2-danger" })
                                            </div>
                                            <div class="col-md-2 hide">
                                                <label class="control-label font-weight-bold">Qty(Less/Eq)</label>
                                                <input type="number" id="txtLessOrEqFaulty" class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="col-md-12" id="dataContainer6">
                                            @*@{Html.RenderAction("GetFaultyItemStockInfo", new { @flag = "View" });}*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade show " id="custom-tabs-two-faultyStockTransfer" role="tabpanel" aria-labelledby="custom-tabs-two-faultyStockTransfer-tab">
                        <div class="row" style="margin-top:-15px">
                            <div class="col-md-12">
                                <div class="card card-gray-dark">
                                    <div class="card-header">
                                        <div class="row">
                                            <div class="col-md-3">

                                            </div>
                                            <div class="col-md-6">
                                                <h5 class="text-center text-bold">
                                                    Faulty Stock Return List
                                                </h5>
                                            </div>
                                            <div class="col-md-3">
                                                <a href="/Production/CreateRepairSectionFaultyItemTransfer" class="btn btn-sm btn-danger btn-flat float-right" title="Faulty Transfer Stock"><i class="fa fa-minus"></i> Faulty Stock Return</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row text-sm">
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card card-navy">
                                    <div class="card-header">
                                        <h6 class="card-title">Search By</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="row" style="margin-top:-15px">
                                            <div class="col-md-2">
                                                <label for="txtTransferCodeFTL" class="control-label font-weight-bold">Return Code</label>
                                                <input type="text" name="search" id="txtTransferCodeFTL" class="form-control form-control-sm" placeholder="Search By Code" />
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlFloorsFaultyTL" class="control-label font-weight-bold">Floor</label>
                                                @Html.DropDownList("ddlFloorsFaultyTL", (IEnumerable<SelectListItem>)ViewBag.ddlLineNumber, "--Select Floor--", new { @class = "form-control form-control-sm" })
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlRepairLineFaultyTL" class="control-label font-weight-bold">Repair</label>
                                                <select id="ddlRepairLineFaultyTL" class="form-control form-control-sm">
                                                    <option value="0">--Select Repair--</option>
                                                </select>
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlStateStatusFaultyTL" class="control-label font-weight-bold">Status</label>
                                                <select id="ddlStateStatusFaultyTL" class="form-control form-control-sm">
                                                    <option value="">--Select Status--</option>
                                                    <option value="Send">Send</option>
                                                    <option value="Received">Received</option>
                                                </select>
                                                @*@Html.DropDownList("ddlStateStatusFaultyTL", (IEnumerable<SelectListItem>)ViewBag.ddlStateStatus, "--Select Status--", new { @class = "form-control form-control-sm" })*@
                                            </div>
                                            <div class="col-md-2">
                                                <label class="control-label font-weight-bold">From Date</label>
                                                <div class="input-group input-group-sm ">
                                                    <input type="text" class="form-control form-control-sm date-datePicker ctrl-changed" id="dptFromDateFTL" />
                                                    <div class="input-group-prepend cursor-pointer remove-date-FTL dptFromDate" style="cursor:pointer">
                                                        <span class="input-group-text">&#10008;</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <label class="control-label font-weight-bold">To Date</label>
                                                <div class="input-group input-group-sm ">
                                                    <input type="text" class="form-control form-control-sm date-datePicker ctrl-changed" id="dptToDateFTL" />
                                                    <div class="input-group-prepend remove-date-FTL dptToDate" style="cursor:pointer">
                                                        <span class="input-group-text">&#10008;</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="text-center text-bold hide" id="loader7">
                                            <h6>Loading...</h6>
                                        </div>
                                        <div class="col-md-12" id="dataContainer7">
                                            @*@{Html.RenderAction("GetRepairSectionFaultyItemTransferList", new { @flag = "View" });}*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade show" id="custom-tabs-two-receiveStock" role="tabpanel" aria-labelledby="custom-tabs-two-receiveStock-tab">
                        <div class="row" style="margin-top:-15px">
                            <div class="col-md-12">
                                <div class="card card-gray-dark">
                                    <div class="card-header">
                                        <div class="row">
                                            <div class="col-md-3">

                                            </div>
                                            <div class="col-md-6">
                                                <h5 class="text-center text-bold">
                                                    Transfer List
                                                </h5>
                                            </div>
                                            <div class="col-md-3">

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card card-navy">
                                    <div class="card-header">
                                        <h6 class="card-title">Search By</h6>
                                    </div>
                                    <div class="card-body text-sm">
                                        <div class="row" style="margin-top:-15px">
                                            <div class="col-md-3">
                                                <label for="ddlFloorNoTransferList" class="control-label font-weight-bold">Floor</label>
                                                @Html.DropDownList("ddlFloorNoReceiveList", (IEnumerable<SelectListItem>)ViewBag.ddlLineNumber, "--Select Floor--", new { @class = "form-control form-control-sm ctrl-change" })
                                            </div>
                                            <div class="col-md-3">
                                                <label for="ddlModelNameReceiveList" class="control-label font-weight-bold">Model</label>
                                                @Html.DropDownList("ddlModelNameReceiveList", (IEnumerable<SelectListItem>)ViewBag.ddlModelName, "--Select Model--", new { @class = "form-control form-control-sm ctrl-change select2 select2-danger" })
                                            </div>
                                            <div class="col-md-3">
                                                <label for="ddlRepairLineReceiveList" class="control-label font-weight-bold">Repair Line</label>
                                                <select id="ddlRepairLineReceiveList" class="form-control form-control-sm">
                                                    <option value="0">--Select Repair--</option>
                                                </select>
                                            </div>
                                            <div class="col-md-3">
                                                <label for="ddlStateStatusReceiveList" class="control-label font-weight-bold">Status</label>
                                                @Html.DropDownList("ddlStateStatusReceiveList", (IEnumerable<SelectListItem>)ViewBag.ddlStateStatus, "--Select Status--", new { @class = "form-control form-control-sm" })
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <label for="txtTSACode" class="control-label font-weight-bold">Transfer Code</label>
                                                <input type="text" id="txtTSACode" class="form-control form-control-sm" placeholder="Search By Transfer Code" />
                                            </div>
                                            <div class="col-md-3">
                                                <label class="control-label font-weight-bold">From Date</label>
                                                <div class="input-group input-group-sm ">
                                                    <input type="text" class="form-control form-control-sm date-datePicker ctrl-changed" id="dptFromDate" />
                                                    <div class="input-group-prepend cursor-pointer remove-date dptFromDate" style="cursor:pointer">
                                                        <span class="input-group-text">&#10008;</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <label class="control-label font-weight-bold">To Date</label>
                                                <div class="input-group input-group-sm ">
                                                    <input type="text" class="form-control form-control-sm date-datePicker ctrl-changed" id="dptToDate" />
                                                    <div class="input-group-prepend remove-date dptToDate" style="cursor:pointer">
                                                        <span class="input-group-text">&#10008;</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card card-navy">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-12" id="dataContainer8">
                                                @*@{Html.RenderAction("GetFloorStockTransferList", new { @flag = "View", @transferFor = "Repair" });}*@
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade show " id="custom-tabs-two-returnStockList" role="tabpanel" aria-labelledby="custom-tabs-two-returnStockList-tab">
                        <div class="row" style="margin-top:-15px">
                            <div class="col-md-12">
                                <div class="card card-gray-dark">
                                    <div class="card-header">
                                        <div class="row">
                                            <div class="col-md-3">
                                            </div>
                                            <div class="col-md-6">
                                                <h5 class="text-center text-bold">
                                                    Assembly-Repair Section Return List
                                                </h5>
                                            </div>
                                            <div class="col-md-3">
                                                <a href="@Url.Action("CreateRepairStockReturn","Production")" class="btn btn-danger btn-sm btn-flat float-right">
                                                    <i class="fas fa-minus"> Stock Return</i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card card-navy">
                                    <div class="card-header">
                                        <h6 class="card-title">Search By</h6>
                                    </div>
                                    <div class="card-body text-sm">
                                        <div class="row" style="margin-top:-15px">
                                            <div class="col-md-2">
                                                <label for="txtReturnCodeForStockReturn" class="control-label font-weight-bold">Return Code</label>
                                                <input type="text" name="search" id="txtReturnCodeForStockReturn" class="form-control form-control-sm" placeholder="Search By Code" />
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlFloorsForStockReturn" class="control-label font-weight-bold">Floor</label>
                                                @Html.DropDownList("ddlFloorsForStockReturn", (IEnumerable<SelectListItem>)ViewBag.ddlLineNumber, "--Select Floor--", new { @class = "form-control form-control-sm" })
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlRepairLineForStockReturn" class="control-label font-weight-bold">Repair</label>
                                                <select id="ddlRepairLineForStockReturn" class="form-control form-control-sm">
                                                    <option value="0">--Select Repair--</option>
                                                </select>
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlStateStatusForStockReturn" class="control-label font-weight-bold">Status</label>
                                                <select id="ddlStateStatusForStockReturn" class="form-control form-control-sm">
                                                    <option value="">--Select Status--</option>
                                                    <option value="Send">Send</option>
                                                    <option value="Received">Received</option>
                                                </select>
                                                @*@Html.DropDownList("ddlStateStatusFaultyTL", (IEnumerable<SelectListItem>)ViewBag.ddlStateStatus, "--Select Status--", new { @class = "form-control form-control-sm" })*@
                                            </div>
                                            <div class="col-md-2">
                                                <label class="control-label font-weight-bold">From Date</label>
                                                <div class="input-group input-group-sm ">
                                                    <input type="text" class="form-control form-control-sm date-datePicker ctrl-changed" id="dptFromDateForStockReturn" />
                                                    <div class="input-group-prepend cursor-pointer remove-date-ForStockReturn dptFromDate" style="cursor:pointer">
                                                        <span class="input-group-text">&#10008;</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <label class="control-label font-weight-bold">To Date</label>
                                                <div class="input-group input-group-sm ">
                                                    <input type="text" class="form-control form-control-sm date-datePicker ctrl-changed" id="dptToDateForStockReturn" />
                                                    <div class="input-group-prepend remove-date-ForStockReturn dptToDate" style="cursor:pointer">
                                                        <span class="input-group-text">&#10008;</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="text-center text-bold hide" id="loader9">
                                                    <h6>Loading...</h6>
                                                </div>
                                                <div class="col-md-12" id="dataContainer9">

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade show " id="custom-tabs-two-qrCodeList" role="tabpanel" aria-labelledby="custom-tabs-two-qrCodeList-tab">
                        <div class="row text-sm" style="margin-top:-15px">
                            <div class="col-md-12">
                                <div class="card card-gray-dark">
                                    <div class="card-header">
                                        <div class="row">
                                            <div class="col-md-3">

                                            </div>
                                            <div class="col-md-6">
                                                <h5 class="text-center text-bold">
                                                    QRCode List
                                                </h5>
                                            </div>
                                            <div class="col-md-3">

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row text-sm">
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card card-navy">
                                    <div class="card-header">
                                        <h6 class="card-title">
                                            Search By
                                        </h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="row" style="margin-top:-15px">
                                            <div class="col-md-2">
                                                <label for="ddlFloorRepairSecitionQRCode" class="control-label font-weight-bold">Floor</label>
                                                @Html.DropDownList("ddlFloorRepairSecitionQRCode", (IEnumerable<SelectListItem>)ViewBag.ddlLineNumber, "--Select Floor--", new { @class = "form-control form-control-sm ctrl-change" })
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlRepairLineQRCodeQC" class="control-label font-weight-bold">QC</label>
                                                <select id="ddlRepairLineQRCodeQC" class="form-control form-control-sm">
                                                    <option value="0">--Select QC--</option>
                                                </select>
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlRepairLineQRCodeRepair" class="control-label font-weight-bold">Repair</label>
                                                <select id="ddlRepairLineQRCodeRepair" class="form-control form-control-sm">
                                                    <option value="0">--Select Repair--</option>
                                                </select>
                                            </div>
                                            <div class="col-md-2">
                                                <label for="ddlModelName" class="control-label font-weight-bold">Model</label>
                                                @Html.DropDownList("ddlModelName", (IEnumerable<SelectListItem>)ViewBag.ddlModelName, "--Select Model--", new { @class = "form-control form-control-sm select2 select2-danger ctrl-changed" })
                                            </div>
                                            <div class="col-md-4">
                                                <label class="control-label font-weight-bold" style="visibility:hidden">To Dateeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee</label>
                                                <button type="button" class="btn float-lg-right btn-sm btn-success" id="btnQRCodesSubmit">Submit  <i class="fas fa-paper-plane"></i></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-12" id="dataContainer11" style="min-height:50px">
                                                @{Html.RenderAction("GetRepairSectionReceiveQRCode", new { @flag = "qrCodeReceive" });}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade show " id="custom-tabs-two-qrCodeReceiveFromMiniStockList" role="tabpanel" aria-labelledby="custom-tabs-two-qrCodeReceiveFromMiniStockList-tab">
                        <div class="row" style="margin-top:-15px">
                            <div class="col-md-12">
                                <div class="card card-gray-dark">
                                    <div class="card-header">
                                        <div class="row">
                                            <div class="col-md-2">
                                            </div>
                                            <div class="col-md-8">
                                                <h5 class="text-center text-bold">
                                                    QR Code Scanning and Receive Non-Semi Finish Good From Mini Stock
                                                </h5>
                                            </div>
                                            <div class="col-md-2">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12" style="margin-top:-10px">
                                <div class="card card-navy">
                                    <div class="card-header">

                                    </div>
                                    <div class="card-body">
                                        <div class="row" style="margin-top:-15px">
                                            <div class="col-md-6">
                                                <h5 style="border-bottom:2px solid #70cf44">SCANING</h5>
                                                <div class="row">
                                                    <div class="col-md-12 mb-2">
                                                        <input type="text" id="txtItemQRCodeForLotIn" placeholder="SCAN ITEM BY QR CODE HERE" class="form-control" />
                                                    </div>
                                                </div>
                                                <div class="row">

                                                    <div class="col-md-12">
                                                        <ul>
                                                            <li class="error hide floor">Floor is required</li>
                                                            <li class="error hide qc">QC is required</li>
                                                            <li class="error hide repair">Repair is required</li>
                                                            <li class="error hide qrCode">QRCode is required</li>
                                                            <li class="error hide invalid-qrCode">Invalid QRCode</li>
                                                            <li class="error hide prob-notFound">Add Problems</li>
                                                            <li class="error hide qc-not-for-pdn">This QRCode is not belongs to this Floor</li>
                                                            <li class="error hide duplicate-QrCode">This QRCode already has been transfered</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="returnDetail" role="dialog" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header alert-secondary">
                <h4 id="" class="modal-title">Stock Return Detail</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body" id="modalDataContainer3">

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modalTransferDetails" role="dialog" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header alert-secondary">
                <input type="hidden" id="hdfInfoId" />
                <h4 id="modalHeading" class="modal-title"></h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body" id="modalContainer1">

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="returnDetail" role="dialog" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div
 class="modal-content">
            <div class="modal-header alert-secondary">
                <h4 id="" class="modal-title">Stock Return Detail</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body" id="modalDataContainer3">

            </div>
        </div>
    </div>
</div>

@section scripts{
    <script type="text/javascript">

        var hdfInfoId = $("#hdfInfoId");
        // Stock //
        var ddlProductionFloorStock = $("#ddlProductionFloorStock");
        var ddlRepairLineStock = $("#ddlRepairLineStock");
        var ddlModelNameStock = $("#ddlModelNameStock");
        var ddlItemsStock = $("#ddlItemsStock");
        var txtLessOrEq = $("#txtLessOrEq");
        var pageNo = 1;
        var warehouseStock = '';
        var itemTypeStock = '';
        var itemStock = '';

        ///Receive list //
        var ddlFloorNoReceiveList = $("#ddlFloorNoReceiveList");
        var ddlModelNameReceiveList = $("#ddlModelNameReceiveList");
        var ddlRepairLineReceiveList = $("#ddlRepairLineReceiveList");
        var ddlStateStatusReceiveList = $("#ddlStateStatusReceiveList");
        var dptFromDate = $("#dptFromDate");
        var dptToDate = $("#dptToDate");
        var txtTSACode = $("#txtTSACode");

        // Requisition List //

        var ddlRepairLineReqList = $('#ddlRepairLineReqList');
        var ddlModelNameReqList = $("#ddlModelNameReqList");
        var ddlWarehouseReqList = $("#ddlWarehouseReqList");
        var ddlStateStatusReqList = $("#ddlStateStatusReqList");
        var txtReqCode = $("#txtReqCode");
        var dptFromDateReqList = $("#dptFromDateReqList");
        var dptToDateReqList = $("#dptToDateReqList");

        // Add Requisition //
        var ddlRepairLineReq = $("#ddlRepairLineReq");
        var ddlModelNameReq = $("#ddlModelNameReq");
        var ddlWarehouseReq = $("#ddlWarehouseReq");
        var ddlItemReq = $("#ddlItemReq");
        var txtQuantityReq = $("#txtQuantityReq");
        var txtRemarksReq = $("#txtRemarksReq");
        var unitName = $("#unitName");
        var unitId = "0";

        // Faulty Stock //
        var ddlRepairLineFaultyStock = $("#ddlRepairLineFaultyStock");
        var ddlModelNameFaultyStock = $("#ddlModelNameFaultyStock");
        var ddlItemsFaultyStock = $("#ddlItemsFaultyStock");
        var txtLessOrEqFaulty = $("#txtLessOrEqFaulty");
        var warehouseFaultyStock = '';
        var itemTypeFaultyStock = '';
        var itemFaultyStock = '';

        // Faulty Transfer List //
        var ddlFloorsFaultyTL = $("#ddlFloorsFaultyTL");
        var ddlRepairLineFaultyTL = $("#ddlRepairLineFaultyTL");
        var ddlStateStatusFaultyTL = $("#ddlStateStatusFaultyTL");
        var dptFromDateFTL = $("#dptFromDateFTL");
        var dptToDateFTL = $("#dptToDateFTL");
        var txtTransferCodeFTL = $("#txtTransferCodeFTL");

        //Repair Stock Return
        var ddlFloorsForStockReturn = $("#ddlFloorsForStockReturn");
        var ddlRepairLineForStockReturn = $("#ddlRepairLineForStockReturn");
        var ddlStateStatusForStockReturn = $("#ddlStateStatusForStockReturn");
        var dptFromDateForStockReturn = $("#dptFromDateForStockReturn");
        var dptToDateForStockReturn = $("#dptToDateForStockReturn");
        var txtReturnCodeForStockReturn = $("#txtReturnCodeForStockReturn");

        // Repair Item Stock //
        var ddlFloorItemStock = $("#ddlFloorItemStock");
        var ddlQCLineItemStock = $("#ddlQCLineItemStock");
        var ddlRepairLineItemStock = $("#ddlRepairLineItemStock");
        var ddlModelNameItemStock = $("#ddlModelNameItemStock");
        var ddlItemsItemStock = $("#ddlItemsItemStock");
        var txtLessOrEqItemStock = $("#txtLessOrEqItemStock");
        var warehouseItemStock = '';
        var itemTypeItemStock = '';
        var itemItemStock = '';

        // Receive QC Items //
        var ddlFloorReceiveQCItem = $('#ddlFloorReceiveQCItem');
        var ddlQCLineReceiveQCItem = $("#ddlQCLineReceiveQCItem");
        var ddlRepairLineReceiveQCItem = $("#ddlRepairLineReceiveQCItem");
        var ddlModelNameReceiveQCItem = $("#ddlModelNameReceiveQCItem");
        var dptFromDateReceiveQCItem = $("#dptFromDateReceiveQCItem");
        var dptToDateReceiveQCItem = $("#dptToDateReceiveQCItem");
        var txtTSQCode = $("#txtTSQCode");
        var ddlStateStatusReceiveQCItem = $("#ddlStateStatusReceiveQCItem");

        // Transfer QC Items //
        var ddlFloorTransferQCItem = $("#ddlFloorTransferQCItem");
        var ddlQCLineTransferQCItem = $("#ddlQCLineTransferQCItem");
        var ddlRepairLineTransferQCItem = $("#ddlRepairLineTransferQCItem");
        var ddlModelNameTransferQCItem = $("#ddlModelNameTransferQCItem");
        var txtTRQCode = $("#txtTRQCode");
        var ddlStateStatusTransferQCItem = $("#ddlStateStatusTransferQCItem");
        var dptFromDateTransferQCItem = $("#dptFromDateTransferQCItem");
        var dptToDateTransferQCItem = $("#dptToDateTransferQCItem");

        //Repair Section QRCodeList
        var ddlFloorRepairSecitionQRCode = $("#ddlFloorRepairSecitionQRCode");
        var ddlRepairLineQRCodeQC = $("#ddlRepairLineQRCodeQC");
        var ddlRepairLineQRCodeRepair = $("#ddlRepairLineQRCodeRepair");
        var ddlModelName = $("#ddlModelName");


        $(document).ready(function () {
            //Initialize Select2 Elements
            $('.select2').select2();

            //Initialize Select2 Elements
            $('.select2bs4').select2({
                theme: 'bootstrap4'
            });

            loadDataTableInitializer();

            $(".transferFor").addClass('hide');
            $(".assemblyLine").addClass('hide');

            dptFromDateReqList.prop('readonly', true);
            dptToDateReqList.prop('readonly', true);
            dptFromDateReqList.css("background-color", "#fff");
            dptToDateReqList.css("background-color", "#fff");

            $('#dptFromDateReqList').datepicker({
                format: "dd MM yyyy",
                orientation: "bottom auto",
                todayHighlight: true
            });
            $('#dptToDateReqList').datepicker({
                format: "dd MM yyyy",
                orientation: "bottom auto",
                todayHighlight: true
            });


            dptFromDateFTL.prop('readonly', true);
            dptToDateFTL.prop('readonly', true);
            dptFromDateFTL.css("background-color", "#fff");
            dptToDateFTL.css("background-color", "#fff");

            $('#dptFromDateFTL').datepicker({
                format: "dd MM yyyy",
                orientation: "bottom auto",
                todayHighlight: true
            }).on("change", function () {
                $('.datepicker').hide();
            });
            $('#dptToDateFTL').datepicker({
                format: "dd MM yyyy",
                orientation: "bottom auto",
                todayHighlight: true
            }).on("change", function () {
                $('.datepicker').hide();
                });

            dptFromDateForStockReturn.prop('readonly', true);
            dptToDateForStockReturn.prop('readonly', true);
            dptFromDateForStockReturn.css("background-color", "#fff");
            dptToDateForStockReturn.css("background-color", "#fff");

            $('#dptFromDateForStockReturn').datepicker({
                format: "dd MM yyyy",
                orientation: "bottom auto",
                todayHighlight: true
            }).on("change", function () {
                $('.datepicker').hide();
            });
            $('#dptToDateForStockReturn').datepicker({
                format: "dd MM yyyy",
                orientation: "bottom auto",
                todayHighlight: true
            }).on("change", function () {
                $('.datepicker').hide();
            });

            // Receive QC Items //
            dptFromDateReceiveQCItem.prop('readonly', true);
            dptToDateReceiveQCItem.prop('readonly', true);
            dptFromDateReceiveQCItem.css("background-color", "#fff");
            dptToDateReceiveQCItem.css("background-color", "#fff");
            $('#dptFromDateReceiveQCItem').datepicker({
                format: "dd MM yyyy",
                orientation: "bottom auto",
                todayHighlight: true
            });
            $('#dptToDateReceiveQCItem').datepicker({
                format: "dd MM yyyy",
                orientation: "bottom auto",
                todayHighlight: true
            });

            // Transfer QC Item
            dptFromDateTransferQCItem.prop('readonly', true);
            dptToDateTransferQCItem.prop('readonly', true);
            dptFromDateTransferQCItem.css("background-color", "#fff");
            dptToDateTransferQCItem.css("background-color", "#fff");
            $('#dptFromDateTransferQCItem').datepicker({
                format: "dd MM yyyy",
                orientation: "bottom auto",
                todayHighlight: true
            });
            $('#dptToDateTransferQCItem').datepicker({
                format: "dd MM yyyy",
                orientation: "bottom auto",
                todayHighlight: true
            });
            
        })

        function loadDataTableInitializer() {
            LoadDataTableReceiveItems();
            LoadDataTableReceiveList();
            LoadDataTableItemStock();
            LoadDataTableTransferQCItem();            
            LoadDataTableStock();
            LoadDataTableReqList();
            LoadDataTableFaultyStock();
            LoadDataTableFaultyTransferList();
            LoadDataTableStockReturn();
        }

        // Repair Line Spare Parts Stock //

        function getItemDetailsByStock() {
            warehouseStock = '';
            itemTypeStock = '';
            itemStock = '';
            if (ddlItemsStock.val() != '') {
                itemStock = ddlItemsStock.val().substring(0, ddlItemsStock.val().indexOf("#"));
                itemTypeStock = ddlItemsStock.val().substring(ddlItemsStock.val().indexOf("#") + 1, ddlItemsStock.val().lastIndexOf("#"));
                warehouseStock = ddlItemsStock.val().substring(ddlItemsStock.val().lastIndexOf("#") + 1);
            }
        }

        ddlProductionFloorStock.change(function () {
            LoadDataTableStock();
            clearDropdown("ddlRepairLineStock");
            if (ddlProductionFloorStock.val() != "") {
                LoadDropDown('/Common/GetRepairLineByLine', 'POST', ddlRepairLineStock, JSON.stringify({ lineId: ddlProductionFloorStock.val() }));
            }
           
        })

        ddlRepairLineStock.change(function () {
            LoadDataTableStock();
        })

        ddlModelNameStock.change(function () {
            LoadDataTableStock();
        })

        ddlItemsStock.change(function () {
            LoadDataTableStock();
        })

        txtLessOrEq.keyup(function () {
            LoadDataTableStock();
        })

        function LoadDataTableStock() {
            getItemDetailsByStock();
            var data = { flag: "search", lineId: ddlProductionFloorStock.val(), repairId: TryParseInt(ddlRepairLineStock.val(), 0), modelId: TryParseInt(ddlModelNameStock.val(), 0), qcId: 0, warehouseId: warehouseStock, itemTypeId: itemTypeStock, itemId: itemStock, lessOrEq: txtLessOrEq.val(), page: pageNo };

            $.when(getReqWithData('html', 'GET', '/Production/GetRepairLineStockInfo', data)).then(function (res, status) {
                console.log(status);
                if (status === "success") {
                    $("#dataContainer4").fadeOut('500', function () {
                        $("#dataContainer4").empty();
                        $("#dataContainer4").append(res).fadeIn('500');
                    });
                }
            }).fail(function (error) {
                console.log(error);
            });
            pageNo = 1;
        }

        $(document).on('click', 'a.page-link', function (e) {
            e.preventDefault();
            if (!$(this).hasClass('current-page')) {
                pageNo = $(this).attr('data-page-no');
                LoadDataTableStock();
            }
        })

        // Receive Stocks //
        $(document).on('click', 'div.remove-date', function () {
            if ($(this).hasClass("dptToDate")) {
                if (dptToDate.val() !== '') {
                    dptToDate.val('');
                    LoadDataTableReceiveList();
                }
            }
            if ($(this).hasClass("dptFromDate")) {
                if (dptFromDate.val() !== '') {
                    dptFromDate.val('');
                    LoadDataTableReceiveList();
                }
            }
        })

        ddlFloorNoReceiveList.change(function () {
            clearDropdown("ddlRepairLineReceiveList");
            if (ddlFloorNoReceiveList.val() != "") {
                LoadDropDown('/Common/GetRepairLineByLine', 'POST', ddlRepairLineReceiveList, JSON.stringify({ lineId: ddlFloorNoReceiveList.val() }));
            }
            LoadDataTableReceiveList();
        })

        ddlRepairLineReceiveList.change(function myfunction() {
            LoadDataTableReceiveList();
        })

        ddlModelNameReceiveList.change(function myfunction() {
            LoadDataTableReceiveList();
        })

        ddlStateStatusReceiveList.change(function myfunction() {
            LoadDataTableReceiveList();
        })

        txtTSACode.keyup(function () {
            LoadDataTableReceiveList();
        })

        function LoadDataTableReceiveList() {
            var data = { flag: "search", floorId: TryParseInt(ddlFloorNoReceiveList.val(), 0), transferFor: "Repair", repairLineId: TryParseInt(ddlRepairLineReceiveList.val(), 0), assemblyId: 0, modelId: TryParseInt(ddlModelNameReceiveList.val(), 0), warehouseId: 0, itemTypeId: 0, itemId: 0, status: ddlStateStatusReceiveList.val(), transferCode: txtTSACode.val(), fromDate: dptFromDate.val(), toDate: dptToDate.val(), transferInfoId: 0, page: pageNo };

            $.when(getReqWithData('html', 'GET', '/Production/GetFloorStockTransferList', data)).then(function (res, status) {
                console.log(status);
                if (status === "success") {
                    $("#dataContainer8").fadeOut('500', function () {
                        $("#dataContainer8").empty();
                        $("#dataContainer8").append(res).fadeIn('500');
                        $(".transferFor").addClass('hide');
                        $(".assemblyLine").addClass('hide');
                    });
                }
            }).fail(function (error) {
                console.log(error);
            });
            //pageNo = 1;
        }

        $(document).on('click', 'a.data-floor-item-detail', function (e) {
            e.preventDefault();
            var id = $(this).attr("data-floor-item-detail");
            hdfInfoId.val('0')
            hdfInfoId.val(id)
            $.when(getReqWithData('html', type.get, '/Production/GetFloorStockTransferList', { flag: "detail", transferInfoId: id })).then(function (res, status) {
                if (status === "success") {
                    $("#modalContainer1").empty();
                    $("#modalContainer1").append(res);
                    $("#modalHeading").empty();
                    $("#modalHeading").text("Receive Details");
                    $("#modalTransferDetails").modal("toggle");
                    //$(".btnAccepted").addClass("hide")
                }
            }).fail(function (error) {
                console.log(error);
            })
        })

        // accept the transfer stock
        $(document).on("click", ".btnAccepted", function (e) {
            e.preventDefault();
            fnTransferStateChange(hdfInfoId.val(), reqStatus.accepted);
        })

        function fnTransferStateChange(id, status) {
            var data = JSON.stringify({ transferId: id, status: status });
            $.when(postReqWithToken(dataType.applicationJson, dataType.json, type.post, '/Production/SaveRepairSectionRequisitionState', data, getToken())).then(function (res, status) {
                if (res === true && status === "success") {
                    $("#modalTransferDetails").modal("toggle").toggle("fast");
                    hdfInfoId.val('0');
                    $('.toastrDefaultSuccess').trigger('click');
                    setTimeout(function () {
                        LoadDataTableReceiveList();
                        LoadDataTableStock();
                    }, 1000);
                    
                }
            }).fail(function (error) {
                console.log(error);
            })
        }

        $(document).on('click', 'div.remove-date-reqList', function () {
            if ($(this).hasClass("dptToDateReqList")) {
                if (dptToDateReqList.val() !== '') {
                    dptToDateReqList.val('');
                    LoadDataTableReqList();
                }
            }
            if ($(this).hasClass("dptFromDateReqList")) {
                if (dptFromDateReqList.val() !== '') {
                    dptFromDateReqList.val('');
                    LoadDataTableReqList();
                }
            }
        })

        txtReqCode.keyup(function () {
            LoadDataTableReqList();
        })

        $(document).on('change', '.ctrl-changed', function () {
            LoadDataTableReqList();
        })

        function LoadDataTableReqList() {
            var repairId = ddlRepairLineReqList.val() !== "" ? ddlRepairLineReqList.val().substring(0, ddlRepairLineReqList.val().indexOf("#")) : 0;
            var data = { flag: "view", reqCode: txtReqCode.val().trim(), repairLineId: TryParseInt(repairId, 0), modelId: TryParseInt(ddlModelNameReqList.val(), 0), warehouseId: TryParseInt(ddlWarehouseReqList.val(), 0), status: ddlStateStatusReqList.val(), requisitionCode: txtReqCode.val(), fromDate: dptFromDateReqList.val(), toDate: dptToDateReqList.val(), page: pageNo };

            $.when(getReqWithData('html', 'GET', '/Production/GetRepairSectionRequisitionInfoList', data)).then(function (res, status) {
                if (status === "success") {
                    $("#dataContainer5").fadeOut('500', function () {
                        $("#dataContainer5").empty();
                        $("#dataContainer5").append(res).fadeIn('500');
                    });
                }
            }).fail(function (error) {
                console.log(error);
            });
            pageNo = 1;
            console.log(data);
        }

        // Model Detail

        $(document).on('click', 'a.data-item-detail', function (e) {
            e.preventDefault();
            hdfInfoId.val("0");
            var id = $(this).attr('data-item-detail');
            hdfInfoId.val(id);

            $.when(getReqWithData(dataType.html, type.get, '/Production/GetRepairSectionRequisitionInfoList', { flag: "detail", reqInfoId: hdfInfoId.val() })).then(function (res, status) {
                if (status === "success") {
                    $("#modalContainer1").empty();
                    $("#modalContainer1").append(res);
                    $("#modalTransferDetails").modal('show');
                    $("#modalHeading").text('Requisition Details');
                }
            }).fail(function (error) {
                console.log(error);
            })
        })

        $(document).on('click', '.btnAccept', function (e) {
            e.preventDefault();
            var id = TryParseInt(hdfInfoId.val(), 0);
            if (id > 0) {
                bootbox.confirm("Are you sure you want to Accept this requisition", function (result) {
                    if (result) {
                        fnSaveRequisitionState(reqStatus.accepted, id)
                    }
                })
            }
        })

        function fnSaveRequisitionState(status, id) {
            var data = JSON.stringify({ status: status, requisitionId: id });
            $.when(postReqWithToken(dataType.applicationJson, dataType.json, type.post, '/Production/SaveRepairSectionRequisitionState', data, getToken())).then(function (res, status) {
                if (res === true && status === "success") {
                    toastrSuccessAlert(execuStatus.successSave);
                    $("#modalTransferDetails").modal("toggle").fadeOut(500);
                    setTimeout(function () {
                        LoadDataTableReqList();
                    }, 1000);
                }
                else {
                    $('.toastrDefaultError').trigger('click');
                }
            }).fail(function (error) {
                console.log(error);
                $('.toastrDefaultError').trigger('click');
            })
        }

        // Add Requisition //

        ddlWarehouseReq.change(function () {
            $("#unitName").text('');
            clearDropdown("ddlItemReq");
            if (ddlWarehouseReq.val() != "") {
                LoadDropDown('/Common/GetItemsByWarehouse', 'POST', ddlItemReq, JSON.stringify({ warehouseId: ddlWarehouseReq.val() }));
            }
        })

        function clearAll() {
            enable("#ddlWarehouseReq");
            enable("#ddlRepairLineReq");
            enable("#ddlModelNameReq");
            ddlWarehouseReq.val('');
            ddlWarehouseReq.trigger('change');
            ddlRepairLineReq.val('');
            ddlModelNameReq.val('');
            ddlItemReq.val('');
            txtQuantityReq.val('0');
            txtRemarksReq.val('');
            $("#tblData tbody").empty();
            unitName.text('');
            $(".error").addClass('hide');
            unitId = "0";
        }

        $("#btnReset").click(function (e) {
            e.preventDefault();
            clearAll();
        })

        //unit text
        ddlItemReq.change(function () {
            $("#unitName").text('');
            if (ddlItemReq.val() != "") {
                var itemId = ddlItemReq.val().substring(0, ddlItemReq.val().indexOf("#"));
                $.when(postReqWithToken(dataType.applicationJson, dataType.json, 'POST', '/Common/GetUnitByItemId', JSON.stringify({ itemId: itemId }), getToken())).then(function (res, status) {
                    console.log(res);
                    console.log(status);
                    if (status == "success") {
                        $("#unitName").text(res.UnitSymbol);
                        unitId = res.UnitId;
                    }
                }).fail(function (error) {
                    consoleLog(error);
                })
            }
        })

        //click addlist button and save data in list
        $("#btnAddToList").click(function (e) {
            e.preventDefault();
            if (validateInput() === true) {
                disable("#ddlRepairLineReq");
                disable("#ddlWarehouseReq");
                disable("#ddlModelNameReq");

                var itemVal = ddlItemReq.val();

                var itemId = itemVal.substring(0, itemVal.indexOf("#"));
                var itemTypeId = itemVal.substring(itemVal.indexOf("#") + 1);

                var itemName = dropDownSelectedText("ddlItemReq");
                var item = itemName.substring(0, itemName.lastIndexOf("["));
                var itemType = itemName.substring(itemName.lastIndexOf("[") + 1, itemName.lastIndexOf("]"));

                var sl = $("#tblData tbody tr").length;
                var td1 = "<td class='text-center'><b>" + (sl + 1) + "</b></td>"

                var td2 = "<td>" + itemName + "</td>";

                var td3 = "<td class='text-center'>" + txtQuantityReq.val() + "</td>";
                var td4 = "<td class='text-center'>" + unitName.text() + "</td>";
                var td5 = "<td class='hide'>" + txtRemarksReq.val() + "</td>";
                var td6 = "<td class='text-center'><a href='#' class='btn btn-sm btn-danger data-onfly-del'><i class='far fa-trash-alt'></i> Delete</a></td>";
                var td7 = "<td class='hide'>" + itemTypeId + "</td>";
                var td8 = "<td class='hide'>" + itemId + "</td>";
                var td9 = "<td class='hide'>" + unitId + "</td>";
                var td10 = "<td class='hide'>" + itemType + "</td>";
                var td11 = "<td class='hide'>" + item + "</td>";
                var td12 = "<td class='hide'>" + $.trim(unitName.text()) + "</td>";

                console.log("ItemtypeId=" + itemTypeId + ",ItemId=" + itemId + ",UnitId=" + unitId + ", ItemTypeName=" + itemType + ",ItemName =" + item + ", Unit=" + $.trim(unitName.text()));

                var tr = "<tr>" + td1 + td2 + td3 + td4 + td5 + td6 + td7 + td8 + td9 + td10 + td11 + td12 + "</tr>";

                if ($("#tblData tbody tr").length == 0) {
                    $("#tblData tbody").append(tr);
                }
                else {
                    $("#tblData tbody tr").eq(0).before(tr);
                }
                clearCtrl();
            }
        });

        function validateTable() {
            var isValid = true;

            if ($("#tblData tbody tr").length === 0) {
                bootbox.alert("Please add data into the table");
                isValid = false;
            }
            if (ddlRepairLineReq.val() == "") {
                isValid = false;
                $(".req-line").removeClass("hide");
            }
            if (TryParseInt(ddlWarehouseReq.val(), 0) <= 0) {
                isValid = false;
                $(".req-warehouse").removeClass("hide");
            }
            if (TryParseInt(ddlModelNameReq.val(), 0) <= 0) {
                isValid = false;
                $(".require-model").removeClass("hide");
            }
            return isValid;
        }

        function clearCtrl() {
            ddlItemReq.val('');
            ddlModelNameReq.val('');
            ddlModelNameReq.trigger('change');
            txtQuantityReq.val('');
            unitName.text('');
            txtRemarksReq.val('');
            unitId = "0";
        }

        //data delete add list
        $(document).on("click", "a.data-onfly-del", function (e) {
            e.preventDefault();
            var index = $(this).parent().parents('tbody tr').index();
            if (bootbox.confirm("Are you sure you want to delete?", function (result) {
                if (result === true) {
                    removeTableRow("#tblData tbody", index);
                    fnFixTheTbodyRowSerialInDecsOrder("#tblData", index);
                    $("#tblData tbody tr").removeClass("btn-success");
                };
            }));
        })

        function validateInput() {
            $('.error').addClass('hide');
            var isValid = true;
            var count = $("#tblData tbody tr").length;
            if (count > 0) {
                $.each($("#tblData tbody tr"), function (index, item) {
                    var itemId = $(this).children('td').eq(3).html();
                    if (itemId == ddlItemReq.val()) {
                        isValid = false;
                        $(".duplicate-itemName").removeClass('hide');
                    }
                })
            }
            if (ddlRepairLineReq.val() == "") {
                $(".req-line").removeClass("hide");
                isValid = false;
            }
            if (TryParseInt(ddlWarehouseReq.val(), 0) <= 0) {
                $(".req-warehouse").removeClass("hide");
                isValid = false;
            }
            if (TryParseInt(ddlModelNameReq.val(), 0) <= 0) {
                $(".req-model").removeClass("hide");
                isValid = false;
            }
            if (ddlItemReq.val() == "") {
                isValid = false;
                $(".req-item").removeClass("hide");
            }
            if (TryParseInt(txtQuantityReq.val(), 0) <= 0) {
                isValid = false;
                $(".req-quantity").removeClass("hide");
            }
            return isValid;
        }

        $("#btnSubmit").click(function (e) {
            e.preventDefault();
            $(".error").addClass("hide");
            if (validateTable() === true) {
                bootbox.confirm("Are you sure you want to save the data", function (result) {
                    if (result) {

                        disable("#btnSubmit");
                        var repairVal = ddlRepairLineReq.val();
                        var repairLineName = dropDownSelectedText("ddlRepairLineReq")
                        var repairId = repairVal.substring(0, repairVal.indexOf("#"));
                        var repairName = repairLineName.substring(0, repairLineName.lastIndexOf("["));
                        var productionId = repairVal.substring(repairVal.indexOf("#") + 1);
                        var productionName = repairLineName.substring(repairLineName.lastIndexOf("[") + 1, repairLineName.lastIndexOf("]"));

                        console.log("repairId=" + repairId + ",repairName=" + repairName + ",productionId=" + productionId + ",productionName=" + productionName);

                        var info = {
                            RepairLineId: repairId,
                            RepairLineName: repairName,
                            ProductionFloorId: productionId,
                            ProductionFloorName: productionName,
                            DescriptionId: ddlModelNameReq.val(),
                            ModelName: dropDownSelectedText("ddlModelNameReq"),
                            WarehouseId: ddlWarehouseReq.val(),
                            WarehouseName: dropDownSelectedText("ddlWarehouseReq")
                        };

                        console.log("Info");
                        console.log(info); //return;

                        var details = []; details.length = 0;

                        $.each($("#tblData tbody tr"), function (index, item) {
                            var tds = $(this).children('td');
                            details.push({
                                ItemTypeId: tds.eq(6).html(),
                                ItemId: tds.eq(7).html(),
                                UnitId: tds.eq(8).html(),
                                ItemTypeName: tds.eq(9).html(),
                                ItemName: tds.eq(10).html(),
                                UnitName: tds.eq(11).html(),
                                RequestQty: tds.eq(2).html(),
                                Remarks: tds.eq(4).html()
                            });
                        })

                        info.RepairSectionRequisitionDetails = details;

                        console.log("Details");
                        console.log(details);

                        var data = JSON.stringify({ model: info });

                        $.when(postReqWithToken(dataType.applicationJson, dataType.json, type.post, '/Production/SaveRepairSectionRequisition', data, getToken())).then(function (res, status) {
                            console.log('Response');
                            console.log(res);
                            console.log("Status");
                            console.log(status);
                            if (res === true && status === "success") {
                                toastrSuccessAlert(execuStatus.successSave);
                                clearAll();
                                $("#custom-tabs-two-reqList-tab").trigger('click');
                                LoadDataTableReqList();
                            }
                            else {
                                toastrErrorAlert('Something went wrong');
                            }
                            enable("#btnSubmit");
                        }).fail(function (error) {
                            console.log(error);
                            toastrErrorAlert('Something went wrong');
                            enable("#btnSubmit");
                        })

                    } //result

                })// bootbox end

            }// validateTable() end
        })

        ddlRepairLineFaultyStock.change(function () {
            LoadDataTableFaultyStock();
        })

        ddlModelNameFaultyStock.change(function () {
            LoadDataTableFaultyStock();
        })

        ddlItemsFaultyStock.change(function () {
            LoadDataTableFaultyStock();
        })

        txtLessOrEqFaulty.keyup(function () {
            LoadDataTableFaultyStock();
        })

        function getItemDetailsByFaultyStock() {
            warehouseFaultyStock = '';
            itemTypeFaultyStock = '';
            itemFaultyStock = '';
            if (ddlItemsFaultyStock.val() != '') {
                itemFaultyStock = ddlItemsFaultyStock.val().substring(0, ddlItemsFaultyStock.val().indexOf("#"));
                itemTypeFaultyStock = ddlItemsFaultyStock.val().substring(ddlItemsFaultyStock.val().indexOf("#") + 1, ddlItemsFaultyStock.val().lastIndexOf("#"));
                warehouseFaultyStock = ddlItemsFaultyStock.val().substring(ddlItemsFaultyStock.val().lastIndexOf("#") + 1);
            }
        }

        function LoadDataTableFaultyStock() {
            var repair = ddlRepairLineFaultyStock.val() !== "" ? ddlRepairLineFaultyStock.val().split("#") : ["0", "0"];
            getItemDetailsByFaultyStock();
            var data = { flag: "search", lineId: TryParseInt(repair[1], 0), repairId: TryParseInt(repair[0],0), modelId: TryParseInt(ddlModelNameFaultyStock.val(), 0), qcId: 0, warehouseId: TryParseInt(warehouseFaultyStock, 0), itemTypeId: TryParseInt(itemTypeFaultyStock, 0), itemId: TryParseInt(itemFaultyStock, 0), lessOrEq: txtLessOrEqFaulty.val(), reqFor:"Repair", page: pageNo };

            $.when(getReqWithData('html', 'GET', '/Production/GetFaultyItemStockInfo', data)).then(function (res, status) {
                console.log(status);
                if (status === "success") {
                    $("#dataContainer6").fadeOut('500', function () {
                        $("#dataContainer6").empty();
                        $("#dataContainer6").append(res).fadeIn('500');
                    });
                }
            }).fail(function (error) {
                console.log(error);
            });
            pageNo = 1;
        }

        //Pagination
        $(document).on('click', 'a.page-link', function (e) {
            e.preventDefault();
            if (!$(this).hasClass('current-page')) {
                if ($(this).parent().parents('div').hasClass('divRepairFaultyStock')) {
                    pageNo = $(this).attr('data-page-no');
                    LoadDataTableFaultyStock();
                }
            }
        })

        // Faulty Stock Transfer //
        // Transfer List
        $(document).on('click', 'div.remove-date-FTL', function () {
            if ($(this).hasClass("dptToDate")) {
                if (dptToDateFTL.val() !== '') {
                    dptToDateFTL.val('');
                    LoadDataTableFaultyTransferList();
                }
            }
            if ($(this).hasClass("dptFromDate")) {
                if (dptFromDateFTL.val() !== '') {
                    dptFromDateFTL.val('');
                    LoadDataTableFaultyTransferList();
                }
            }
        })

        ddlFloorsFaultyTL.change(function () {
            LoadDataTableFaultyTransferList();
            clearDropdown("ddlRepairLineFaultyTL");
            if (ddlFloorsFaultyTL.val() != "") {
                LoadDropDown('/Common/GetRepairLineByLine', 'POST', ddlRepairLineFaultyTL, JSON.stringify({ lineId: ddlFloorsFaultyTL.val() }));
            }
        })

        ddlRepairLineFaultyTL.change(function () {
            LoadDataTableFaultyTransferList();
        })

        txtTransferCodeFTL.keyup(function () {
            LoadDataTableFaultyTransferList();
        })

        dptFromDateFTL.change(function () {
            LoadDataTableFaultyTransferList();
        })

        dptToDateFTL.change(function () {
            LoadDataTableFaultyTransferList();
        })

        ddlStateStatusFaultyTL.change(function () {
            LoadDataTableFaultyTransferList();
        })

        function LoadDataTableFaultyTransferList() {
            $("#loader7").removeClass("hide");
            var data = { flag: "FaultyStockReturnList", lineId: TryParseInt(ddlFloorsFaultyTL.val(), 0), repairId: TryParseInt(ddlRepairLineFaultyTL.val(), 0), returnCode: $.trim(txtTransferCodeFTL.val()), status: ddlStateStatusFaultyTL.val(), fromDate: dptFromDateFTL.val(), toDate: dptToDateFTL.val(), page: pageNo }
            $.when(getReqWithData('html', 'GET', '/Production/GetRepairLineStockInfo', data)).then(function (res, status) {
                if (status === "success") {
                    $("#dataContainer7").fadeOut('500', function () {
                        $("#dataContainer7").empty();
                        $("#dataContainer7").append(res).fadeIn('500');
                        $(".flag").addClass('hide');
                    });
                }
                $("#loader7").addClass("hide");
            }).fail(function (error) {
                console.log(error);
                $("#loader7").addClass("hide");
                });
            pageNo = 1;
        }
        //Pagination
        $(document).on('click', 'a.page-link', function (e) {
            e.preventDefault();
            if (!$(this).hasClass('current-page')) {
                if ($(this).parent().parents('div').hasClass('divFaultyStockReturnList')) {
                    pageNo = $(this).attr('data-page-no');
                    LoadDataTableFaultyTransferList();
                }
            }
        })
        // Stock Return Detail //
        $(document).on('click', '.data-faulty-item-return', function (e) {
            e.preventDefault();
            var id = $(this).attr("data-faulty-item-val");
            if (TryParseInt(id, 0) > 0) {
                $("#modalDataContainer3").empty();
                var data = { returnId: id };
                $.when(getReqWithData('html', 'GET', '/Production/GetStockReturnItemsDetail', data)).then(function (res, status) {
                    console.log(status);
                    if (status === "success") {
                        $("#modalDataContainer3").append(res);
                        $("#returnDetail").modal("show");
                    }
                }).fail(function (error) {
                    console.log(error);

                });
            }
        })
        //function LoadDataTableFaultyTransferList() {
        //    var data = { flag: "view", floorId: TryParseInt(ddlFloorsFaultyTL.val(), 0), repairLineId: TryParseInt(ddlRepairLineFaultyTL.val(), 0), transferCode: $.trim(txtTransferCodeFTL.val()), status: ddlStateStatusFaultyTL.val(), fromDate: dptFromDateFTL.val(), toDate: dptToDateFTL.val(), page: pageNo };

        //    $.when(getReqWithData('html', 'GET', '/Production/GetRepairSectionFaultyItemTransferList', data)).then(function (res, status) {
        //        if (status === "success") {
        //            $("#dataContainer7").fadeOut('500', function () {
        //                $("#dataContainer7").empty();
        //                $("#dataContainer7").append(res).fadeIn('500');
        //            });
        //        }
        //    }).fail(function (error) {
        //        console.log(error);
        //    });
        //    pageNo = 1;
        //}

        //$(document).on('click', 'a.data-item-detail-FTL', function (e) {
        //    e.preventDefault();
        //    hdfInfoId.val("0");
        //    var id = $(this).attr('data-item-detail');
        //    hdfInfoId.val(id);
        //    $.when(getReqWithData(dataType.html, type.get, '/Production/GetRepairSectionFaultyItemTransferList', { flag: "detail", transferId: hdfInfoId.val() })).then(function (res, status) {
        //        if (status === "success") {
        //            $("#modalContainer1").empty();
        //            $("#modalContainer1").append(res);
        //            $("#modalTransferDetails").modal('show');
        //            $("#modalHeading").text('Faulty Transfer Info & Detail');
        //        }
        //    }).fail(function (error) {
        //        console.log(error);
        //    })
        //})

        // Repair Item Stock

        function getItemDetailsByItemStock() {
            warehouseItemStock = '';
            itemTypeItemStock = '';
            itemItemStock = '';
            if (ddlItemsItemStock.val() != '') {
                itemItemStock = ddlItemsItemStock.val().substring(0, ddlItemsItemStock.val().indexOf("#"));
                itemTypeItemStock = ddlItemsItemStock.val().substring(ddlItemsItemStock.val().indexOf("#") + 1, ddlItemsItemStock.val().lastIndexOf("#"));
                warehouseItemStock = ddlItemsItemStock.val().substring(ddlItemsItemStock.val().lastIndexOf("#") + 1);
            }
        }

        ddlFloorItemStock.change(function () {
            LoadDataTableItemStock();
            clearDropdown("ddlQCLineItemStock");
            clearDropdown("ddlRepairLineItemStock");
            if (ddlFloorItemStock.val() != "") {
                LoadDropDown('/Common/GetQCByLine', 'POST', ddlQCLineItemStock, JSON.stringify({ lineId: ddlFloorItemStock.val() }));
                LoadDropDown('/Common/GetRepairLineByLine', 'POST', ddlRepairLineItemStock, JSON.stringify({ lineId: ddlFloorItemStock.val() }));
            }
        })

        ddlQCLineItemStock.change(function () {
            LoadDataTableItemStock();
        })

        ddlRepairLineItemStock.change(function () {
            LoadDataTableItemStock();
        })

        ddlItemsItemStock.change(function () {
            LoadDataTableItemStock();
        })

        ddlModelNameItemStock.change(function () {
            LoadDataTableItemStock();
        })

        txtLessOrEqItemStock.keyup(function () {
            LoadDataTableItemStock();
        })

        function LoadDataTableItemStock() {

            getItemDetailsByItemStock();
            var data = { flag: "search", floorId: ddlFloorItemStock.val(), qcId: ddlQCLineItemStock.val(), repairId: TryParseInt(ddlRepairLineItemStock.val(), 0), modelId: ddlModelNameItemStock.val(), warehouseId: TryParseInt(warehouseItemStock, 0), itemTypeId: TryParseInt(itemTypeItemStock, 0), itemId: TryParseInt(itemItemStock, 0), lessOrEq: txtLessOrEqItemStock.val(), page: pageNo };

            $.when(getReqWithData('html', 'GET', '/Production/GetRepairItemStockList', data)).then(function (res, status) {
                console.log(status);
                if (status === "success") {
                    $("#dataContainer2").fadeOut('500', function () {
                        $("#dataContainer2").empty();
                        $("#dataContainer2").append(res).fadeIn('500');
                    });
                }
            }).fail(function (error) {
                console.log(error);
            });
            pageNo = 1;
        }

        // Receive QC Item
        ddlFloorReceiveQCItem.change(function () {
            LoadDataTableReceiveItems();
            clearDropdown("ddlQCLineReceiveQCItem");
            clearDropdown("ddlRepairLineReceiveQCItem");
            if (ddlFloorReceiveQCItem.val() != "") {
                LoadDropDown('/Common/GetQCByLine', 'POST', ddlQCLineReceiveQCItem, JSON.stringify({ lineId: ddlFloorReceiveQCItem.val() }));
                LoadDropDown('/Common/GetRepairLineByLine', 'POST', ddlRepairLineReceiveQCItem, JSON.stringify({ lineId: ddlFloorReceiveQCItem.val() }));
            }
        })

        ddlRepairLineReceiveQCItem.change(function () {
            LoadDataTableReceiveItems();
        })

        ddlQCLineReceiveQCItem.change(function () {
            LoadDataTableReceiveItems();
        })

        ddlModelNameReceiveQCItem.change(function () {
            LoadDataTableReceiveItems();
        })

        $(document).on('click', 'div.remove-date-ReceiveQC', function () {
            if ($(this).hasClass("dptToDateReceiveQCItem")) {
                if (dptToDateReceiveQCItem.val() !== '') {
                    dptToDateReceiveQCItem.val('');
                    LoadDataTableReceiveItems();
                }
            }
            if ($(this).hasClass("dptFromDateReceiveQCItem")) {
                if (dptFromDateReceiveQCItem.val() !== '') {
                    dptFromDateReceiveQCItem.val('');
                    LoadDataTableReceiveItems();
                }
            }
        })

        txtTSQCode.keyup(function () {
            LoadDataTableReceiveItems();
        })

        ddlStateStatusReceiveQCItem.change(function () {
            LoadDataTableReceiveItems();
        })

        $(document).on('change', '.ctrl-changed-receive', function () {
            LoadDataTableReceiveItems();
        })

        function LoadDataTableReceiveItems() {

            var data = { flag: "search", lineId: TryParseInt(ddlFloorReceiveQCItem.val(), 0), qcId: TryParseInt(ddlQCLineReceiveQCItem.val(), 0), repairLineId: TryParseInt(ddlRepairLineReceiveQCItem.val(), 0), modelId: TryParseInt(ddlModelNameReceiveQCItem.val(), 0), warehouseId: 0, status: ddlStateStatusReceiveQCItem.val(), transferCode: txtTSQCode.val(), fromDate: dptFromDateReceiveQCItem.val(), toDate: dptToDateReceiveQCItem.val(), transferInfoId: 0, page: pageNo, transferReason: null };

            $.when(getReqWithData('html', 'GET', '/Production/GetReceiveStockForRepairFromQC', data)).then(function (res, status) {
                console.log(status);
                if (status === "success") {
                    $("#dataContainer1").fadeOut('500', function () {
                        $("#dataContainer1").empty();
                        $("#dataContainer1").append(res).fadeIn('500');
                    });
                }
            }).fail(function (error) {
                console.log(error);
            });
            pageNo = 1;
        }

        $(document).on('click', 'a.data-item-detail-RFQ', function (e) {
            e.preventDefault();
            hdfInfoId.val("0")
            var id = $(this).attr("data-item-detail-RFQ");
            hdfInfoId.val(id);
            $.when(getReqWithData('html', type.get, '/Production/GetReceiveStockForRepairFromQC', { flag: "detail", transferInfoId: id })).then(function (res, status) {
                if (status === "success") {
                    $("#modalContainer1").empty();
                    $("#modalContainer1").append(res);
                    $("#modalTransferDetails").modal("toggle");
                    $("#modalHeading").text('Receive QC Item');
                }
            }).fail(function (error) {
                console.log(error);
            })
        })

        $(document).on("click", ".btnAcceptedRFQ", function (e) {
            e.preventDefault();
            fnTransferStateChangeReceiveQCItem(hdfInfoId.val(), reqStatus.accepted);
        })

        function fnTransferStateChangeReceiveQCItem(id, status) {
            var data = JSON.stringify({ transferId: id, status: status });
            $.when(postReqWithToken(dataType.applicationJson, dataType.json, type.post, '/Production/SaveQCTransferStatus', data, getToken())).then(function (res, status) {
                if (res === true && status === "success") {
                    $("#modalTransferDetails").modal("toggle").toggle("fast");
                    hdfInfoId.val('0');
                    toastrSuccessAlert('Items received successfully')
                    $("#modalContainer1").empty();
                    setTimeout(function () {
                        LoadDataTableReceiveItems();
                        LoadDataTableStock();
                        LoadDataTableItemStock();
                    }, 1000);
                }
            }).fail(function (error) {
                console.log(error);
            })
        }

        // Transfer List //

        dptFromDateTransferQCItem.change(function () {
            LoadDataTableTransferQCItem();
        })

        dptToDateTransferQCItem.change(function () {
            LoadDataTableTransferQCItem();
        })

        $(document).on('click', 'div.remove-date-TransferQC', function () {
            if ($(this).hasClass("dptFromDateTransferQCItem")) {
                if (dptFromDateTransferQCItem.val() !== '') {
                    dptFromDateTransferQCItem.val('');
                    LoadDataTableTransferQCItem();
                }
            }
            if ($(this).hasClass("dptToDateTransferQCItem")) {
                if (dptToDateTransferQCItem.val() !== '') {
                    dptToDateTransferQCItem.val('');
                    LoadDataTableTransferQCItem();
                }
            }
        })

        ddlFloorTransferQCItem.change(function () {
            LoadDataTableTransferQCItem();
            clearDropdown("ddlQCLineTransferQCItem");
            clearDropdown("ddlRepairLineTransferQCItem");
            if (ddlFloorTransferQCItem.val() != "") {
                LoadDropDown('/Common/GetQCByLine', 'POST', ddlQCLineTransferQCItem, JSON.stringify({ lineId: ddlFloorTransferQCItem.val() }));
                LoadDropDown('/Common/GetRepairLineByLine', 'POST', ddlRepairLineTransferQCItem, JSON.stringify({ lineId: ddlFloorTransferQCItem.val() }));
            }
           
        })

        ddlRepairLineTransferQCItem.change(function () {
            LoadDataTableTransferQCItem();
        })

        ddlQCLineTransferQCItem.change(function () {
            LoadDataTableTransferQCItem();
        })

        ddlModelNameTransferQCItem.change(function () {
            LoadDataTableTransferQCItem();
        })

        txtTRQCode.keyup(function () {
            LoadDataTableTransferQCItem();
        })

        ddlStateStatusTransferQCItem.change(function () {
            LoadDataTableTransferQCItem();
        })

        function LoadDataTableTransferQCItem() {

            var data = { flag: "View", floorId: TryParseInt(ddlFloorTransferQCItem.val(), 0), repairLineId: TryParseInt(ddlRepairLineTransferQCItem.val(), 0), qcLineId: TryParseInt(ddlQCLineTransferQCItem.val(), 0), modelId: TryParseInt(ddlModelNameTransferQCItem.val(), 0), warehouseId: 0, itemTypeId: 0, itemId: 0, status: ddlStateStatusTransferQCItem.val(), transferCode: $.trim(txtTRQCode.val()), fromDate: dptFromDateTransferQCItem.val(), toDate: dptToDateTransferQCItem.val(), transferInfoId: 0 };

            console.log("Transfer List");
            console.log(data);

            $.when(getReqWithData('html', 'GET', '/Production/GetRepairItemTransferInfoAndDetailByQRCode', data)).then(function (res, status) {
                console.log(status);
                if (status === "success") {
                    $("#dataContainer3").fadeOut('500', function () {
                        $("#dataContainer3").empty();
                        $("#dataContainer3").append(res).fadeIn('500');
                    });
                }
            }).fail(function (error) {
                console.log(error);
            });
            pageNo = 1;
        }

        $(document).on('click', 'a.data-transfer-item-details', function (e) {
            e.preventDefault();
            var id = $(this).attr("data-transfer-item-details");
            hdfInfoId.val('0');
            if (TryParseInt(id, 0) > 0) {
                hdfInfoId.val(id);
                LoadDataTableTransferQCItemDetail();
            }
        })

        function LoadDataTableTransferQCItemDetail() {
            var data = { flag: "Detail", floorId: 0, repairLineId: 0, qcLineId: 0, modelId: 0, warehouseId: 0, itemTypeId: 0, itemId: 0, status: '', transferCode: '', fromDate: '', toDate: '', transferInfoId: TryParseInt(hdfInfoId.val(), 0) };
            $.when(getReqWithData('html', 'GET', '/Production/GetRepairItemTransferInfoAndDetailByQRCode', data)).then(function (res, status) {
                console.log(status);
                if (status === "success") {
                    $("#modalContainer1").empty();
                    $("#modalContainer1").append(res);
                    $("#modalTransferDetails").modal("toggle");
                    $(".btnAcceptRepairTransfer").addClass("hide");
                }
            }).fail(function (error) {
                console.log(error);
            });
        }

        function redirectPage(page) {
            window.location.replace(page);
        }

        // Repair Stock Return List //
        // Stock Return List //

        $(document).on('click', 'div.remove-date-ForStockReturn', function () {
            if ($(this).hasClass("dptToDate")) {
                if (dptToDateForStockReturn.val() !== '') {
                    dptToDateForStockReturn.val('');
                    LoadDataTableStockReturn();
                }
            }
            if ($(this).hasClass("dptFromDate")) {
                if (dptFromDateForStockReturn.val() !== '') {
                    dptFromDateForStockReturn.val('');
                    LoadDataTableStockReturn();
                }
            }
        })

        ddlFloorsForStockReturn.change(function () {
            LoadDataTableStockReturn();
            clearDropdown("ddlRepairLineForStockReturn");
            if (ddlFloorsForStockReturn.val() != "") {
                LoadDropDown('/Common/GetRepairLineByLine', 'POST', ddlRepairLineForStockReturn, JSON.stringify({ lineId: ddlFloorsForStockReturn.val() }));
            }
        })

        ddlRepairLineForStockReturn.change(function () {
            LoadDataTableStockReturn();
        })

        txtReturnCodeForStockReturn.keyup(function () {
            LoadDataTableStockReturn();
        })

        dptFromDateForStockReturn.change(function () {
            LoadDataTableStockReturn();
        })

        dptToDateForStockReturn.change(function () {
            LoadDataTableStockReturn();
        })

        ddlStateStatusForStockReturn.change(function () {
            LoadDataTableStockReturn();
        })
        function LoadDataTableStockReturn() {
            $("#loader9").removeClass("hide");
            var data = { flag: "StockReturnList", lineId: TryParseInt(ddlFloorsForStockReturn.val(), 0), repairId: TryParseInt(ddlRepairLineForStockReturn.val(), 0), returnCode: $.trim(txtReturnCodeForStockReturn.val()), status: ddlStateStatusForStockReturn.val(), fromDate: dptFromDateForStockReturn.val(), toDate: dptToDateForStockReturn.val(), page: pageNo }
            $.when(getReqWithData('html', 'GET', '/Production/GetRepairLineStockInfo', data)).then(function (res, status) {
                console.log(status);
                if (status === "success") {
                    $("#dataContainer9").fadeOut('500', function () {
                        $("#dataContainer9").empty();
                        $("#dataContainer9").append(res).fadeIn('500');
                        $(".flag").addClass('hide');
                    });
                }
                $("#loader9").addClass("hide");
            }).fail(function (error) {
                console.log(error);
                $("#loader9").addClass("hide");
                });
            pageNo = 1;
        }
        //Pagination
        $(document).on('click', 'a.page-link', function (e) {
            e.preventDefault();
            if (!$(this).hasClass('current-page')) {
                if ($(this).parent().parents('div').hasClass('divStockReturnList')) {
                    pageNo = $(this).attr('data-page-no');
                    LoadDataTableStockReturn();
                }
            }
        })
        // Stock Return Detail //
        $(document).on('click', '.data-item-return', function (e) {
            e.preventDefault();
            var id = $(this).attr("data-item-val");
            if (TryParseInt(id, 0) > 0) {
                $("#modalDataContainer3").empty();
                var data = { returnId: id };
                $.when(getReqWithData('html', 'GET', '/Production/GetStockReturnItemsDetail', data)).then(function (res, status) {
                    console.log(status);
                    if (status === "success") {
                        $("#modalDataContainer3").append(res);
                        $("#returnDetail").modal("show");
                    }
                }).fail(function (error) {
                    console.log(error);

                });
            }
        })

        //// Stock Return Detail //
        //$(document).on('click', '.data-item-return', function (e) {
        //    e.preventDefault();
        //    var id = $(this).attr("data-item-val");
        //    if (TryParseInt(id, 0) > 0) {
        //        $("#modalDataContainer3").empty();
        //        var data = { returnId: id };
        //        $.when(getReqWithData('html', 'GET', '/Production/GetStockReturnItemsDetail', data)).then(function (res, status) {
        //            if (status === "success") {
        //                $("#modalDataContainer3").append(res);
        //                $("#returnDetail").modal("show");
        //            }
        //        }).fail(function (error) {
        //            console.log(error);

        //        });
        //    }
        //})

        // Repair Section QRCode
        ddlFloorRepairSecitionQRCode.change(function () {
            LoadDataTableRepairSectionReceiveQRCode();
            clearDropdown("ddlRepairLineQRCodeQC");
            clearDropdown("ddlRepairLineQRCodeRepair");
            if (ddlFloorRepairSecitionQRCode.val() != "") {
                LoadDropDown('/Common/GetQCByLine', 'POST', ddlRepairLineQRCodeQC, JSON.stringify({ lineId: ddlFloorRepairSecitionQRCode.val() }));
                LoadDropDown('/Common/GetRepairLineByLine', 'POST', ddlRepairLineQRCodeRepair, JSON.stringify({ lineId: ddlFloorRepairSecitionQRCode.val() }));
            }
        })

        ddlFloorRepairSecitionQRCode.change(function () {
            LoadDataTableRepairSectionReceiveQRCode();
        })
        ddlModelName.change(function () {
            LoadDataTableRepairSectionReceiveQRCode();
        })
        ddlRepairLineQRCodeQC.change(function () {
            LoadDataTableRepairSectionReceiveQRCode();
        })
        ddlRepairLineQRCodeRepair.change(function () {
            LoadDataTableRepairSectionReceiveQRCode();
        })

        function LoadDataTableRepairSectionReceiveQRCode() {
            var data = { flag: "qrCodeReceive1", modelId: TryParseInt(ddlModelName.val(), 0), lineId: ddlFloorRepairSecitionQRCode.val(), qclineId: ddlRepairLineQRCodeQC.val(), repairlineId: ddlRepairLineQRCodeRepair.val() };

            $.when(getReqWithData('html', 'GET', '/Production/GetRepairSectionReceiveQRCode', data)).then(function (res, status) {
                console.log(status);
                if (status === "success") {
                    $("#dataContainer11").fadeOut('500', function () {
                        $("#dataContainer11").empty();
                        $("#dataContainer11").append(res).fadeIn('500');
                    });
                }
            }).fail(function (error) {
                console.log(error);
            });
           // pageNo = 1;
        }

        var count = 0;
        $(document).on('change', 'input[name="allQRCode"]', function () {
            var isChecked = $('input[name="allQRCode"]').is(":checked");
            $('input[name="QRCodes"]').prop("checked", isChecked);
            if (isChecked) {
                count = $(".tblRepairSectionQRCodeList tbody tr").length;
            }
            else {
                count = 0;
            }
        })

        $(document).on('change', 'input[name="QRCodes"]', function () {
            count = 0;
            $.each($(".tblRepairSectionQRCodeList tbody tr"), function (index, item) {
                if ($(this).children('td').eq(1).children('input[name="QRCodes"]').is(":checked")) {
                    count++;
                }
            });
            var allChecked = $(".tblRepairSectionQRCodeList tbody tr").length == count;
            $('input[name="allQRCode"]').prop("checked", allChecked);
        })


        function ValidateSubmit() {
            var isValid = true;
            if (count == 0) {
                isValid = false;
                bootbox.alert("Please check at least one row");
            }
            return isValid;
        }

        $("#btnQRCodesSubmit").click(function (e) {
            e.preventDefault();
            if (ValidateSubmit()) {
                bootbox.confirm("Are you sure you want to Transfer these QRCodes", function (result) {
                    if (result) {
                        disable("#btnQRCodesSubmit");
                        var qRCodes = []; qRCodes.length = 0;
                        $.each($(".tblRepairSectionQRCodeList tbody tr"), function (index, item) {
                            var checkBox = $(this).children('td').eq(1).children('input[name="QRCodes"]');
                            if (checkBox.is(":checked")) {
                                qRCodes.push(TryParseInt(checkBox.attr("data-item-val"), 0));
                            }
                        });

                        var data = JSON.stringify({ qRCodes: qRCodes, qty: count });
                       //return console.log(data);
                        $.when(postReqWithToken(dataType.applicationJson, dataType.json, type.post, '/Production/SaveRepairSectionSemiFinishTransfer', data, getToken())).then(function (res, status) {
                             if (res == true) {
                                setTimeout(function () {
                                    $('.toastrDefaultSuccess').trigger('click');
                                    redirectPage('@Url.Action("GetRepairLineStockInfo")');
                                }, 1000);
                            }
                                else {
                                    $('.toastrDefaultError').trigger('click');
                                }
                            enable("#btnQRCodesSubmit");
                        }).fail(function (error) {
                            console.log(error);
                            $('.toastrDefaultError').trigger('click');
                            enable("#btnQRCodesSubmit");
                        });
                    }
                })
            }
        });


        ///////////
        var txtItemQRCodeForLotIn = $("#txtItemQRCodeForLotIn");
        var txtItemQRCodeForLotInSearch = $("#txtItemQRCodeForLotInSearch");
        var dptFromDate = $("#dptFromDate");
        var dptToDate = $("#dptToDate");
        var problemsObj = [];
        var qrCodeDataObj = {};

        $(document).ready(function () {
            txtItemQRCodeForLotIn.focus();
        })



        function validateQRCode() {
            return ajaxBooleanChecker(JSON.stringify({ qrCode: $.trim(txtItemQRCodeForLotIn.val()) }), '/Common/IsExistCheckMiniStock', getToken()) == true;
        }

        txtItemQRCodeForLotIn.change(function () {
            qrCodeDataObj = {};
            if ($.trim(txtItemQRCodeForLotIn.val()) !== "") {
                if (validateQRCode()) {
                    var data = JSON.stringify({ qrCode: $.trim(txtItemQRCodeForLotIn.val()) });
                    //return console.log(data);
                    $.when(postReqWithToken(dataType.applicationJson, dataType.json, type.post, '/Production/UpdateStockAndReceiveRepairSection', data, getToken())).then(function (res, status) {
                        if (status === "success") {
                            qrCodeDataObj = res;
                            toastrSuccessAlert(execuStatus.successSave);
                            txtItemQRCodeForLotIn.val('');
                            txtItemQRCodeForLotIn.focus();
                        }
                        else {
                            txtItemQRCodeForLotIn.val('');
                            txtItemQRCodeForLotIn.focus();
                        }
                    }).fail(function (error) {
                        console.log(error);
                    })
                }
                else {
                    txtItemQRCodeForLotIn.val('');
                    txtItemQRCodeForLotIn.focus();
                    toastrErrorAlert('QRCode may has been transfered')
                }
            }
        })

        txtItemQRCodeForLotInSearch.change(function () {
            LoadDataTableForLotInList();
            txtItemQRCodeForLotInSearch.val('');
            txtItemQRCodeForLotInSearch.focus();
        })
       
        
    </script>
}